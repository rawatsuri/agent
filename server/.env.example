# ==================================
# DATABASE (Supabase)
# ==================================
# Connection pooler (port 6543) for application
DATABASE_URL="postgresql://user:password@host:6543/database?schema=public&pgbouncer=true&connection_limit=20&pool_timeout=10"

# Direct connection (port 5432) for migrations only
DIRECT_URL="postgresql://user:password@host:5432/database?schema=public"

# Shadow database for migration testing (optional)
SHADOW_DATABASE_URL="postgresql://user:password@host:port/shadow?schema=public"

# ==================================
# AUTHENTICATION (Clerk)
# ==================================
CLERK_SECRET_KEY="sk_test_xxxxx"
CLERK_PUBLISHABLE_KEY="pk_test_xxxxx"
CLERK_WEBHOOK_SECRET="whsec_xxxxx"

# ==================================
# AI SERVICES
# ==================================
OPENAI_API_KEY="sk-xxxxx"
OPENAI_TIMEOUT_MS=15000  # 15 seconds
AZURE_SPEECH_KEY="xxxxx"
AZURE_SPEECH_REGION="eastus"

# ==================================
# TELEPHONY (Exotel)
# ==================================
EXOTEL_SID="xxxxx"
EXOTEL_API_KEY="xxxxx"
EXOTEL_API_TOKEN="xxxxx"
EXOTEL_SUBDOMAIN="xxxxx"

# ==================================
# EMAIL (SendGrid)
# ==================================
SENDGRID_API_KEY="SG.xxxxx"
SENDGRID_FROM_EMAIL="noreply@yourdomain.com"
SENDGRID_WEBHOOK_SECRET="xxxxx"

# ==================================
# REDIS (Upstash)
# ==================================
REDIS_URL="redis://default:xxxxx@xxxxx.upstash.io:6379"

# ==================================
# SOCIAL CHANNELS
# ==================================
TELEGRAM_BOT_TOKEN="xxxxx:xxxxx"
META_ACCESS_TOKEN="xxxxx" # For WhatsApp/Instagram
META_WEBHOOK_SECRET="xxxxx"
META_VERIFY_TOKEN="xxxxx"

# ==================================
# SECURITY (CRITICAL)
# ==================================
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY="0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef"

# Internal API key for admin endpoints and voice bridge
INTERNAL_API_KEY="change-me-to-secure-random-string"

# JWT secret for session tokens
JWT_SECRET="change-me-to-secure-random-string"

# ==================================
# CIRCUIT BREAKER CONFIG
# ==================================
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2
CIRCUIT_BREAKER_TIMEOUT_MS=30000  # 30 seconds

# ==================================
# SERVER CONFIG
# ==================================
PORT=3000
NODE_ENV=development
LOG_LEVEL=debug

# CORS allowed origins (comma-separated)
ALLOWED_ORIGINS="http://localhost:3000,http://localhost:5173"

# ==================================
# FEATURE FLAGS
# ==================================
ENABLE_VOICE=true
ENABLE_CHAT=true
ENABLE_EMAIL=true
ENABLE_SMS=true
ENABLE_SOCIAL=true

# ==================================
# PERFORMANCE TUNING
# ==================================
# Max concurrent OpenAI requests
MAX_CONCURRENT_AI_REQUESTS=50

# LRU cache settings
L1_CACHE_MAX_SIZE=10000  # Max entries
L1_CACHE_MAX_MB=50       # Max memory in MB

# Redis key expiry (seconds)
REDIS_DEFAULT_TTL=3600  # 1 hour

# ==================================
# MONITORING
# ==================================
# Enable Prometheus metrics
ENABLE_METRICS=true

# Enable request tracing
ENABLE_TRACING=true

# Log sampling rate (0.0-1.0)
LOG_SAMPLING_RATE=1.0
